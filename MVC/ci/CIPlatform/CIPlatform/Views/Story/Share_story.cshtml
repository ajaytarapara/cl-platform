     @model CIPlatform.Entities.ViewModels.ShareStoryModel

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>

<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

<div class="container-fluid" style="border-top:1px solid gray;border-bottom: 1px solid gray;">
    <div class="row">
        <div id="menubarimg">
            <button onclick="menubartoggle()"><img src="~/images/list.png" alt=""></button>
        </div>
        <div class="col-6  leftnav" style="justify-content:space-around;">

            <a style="border: none; background: white;" asp-action="StoryListing">Stories</a>
            <button style="border: none; background: white;" class="dropdown-toggle bg-light" type="button"
                    id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                Policy
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                <li><button class="dropdown-item" type="button">Action</button></li>
                <li><button class="dropdown-item" type="button">Another action</button></li>
                <li><button class="dropdown-item" type="button">Something else here</button></li>
            </ul>
        </div>
        <div class="col-6 d-flex px-5 rightnav">
            <a type="hidden" style="display:none" id="userid">@Model.userid</a>
            <img src="@Model.avatar" alt="" class="src"
                 style="border-radius: 50%;height: 100%; padding: 4px;">
            <button style="border: none; background: white;" class="dropdown-toggle bg-light" type="button"
                    id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                @Model.username
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                <li><button class="dropdown-item" type="button">Action</button></li>
                <li><button class="dropdown-item" type="button">Another action</button></li>
                <li><button class="dropdown-item" type="button">Something else here</button></li>
            </ul>



        </div>
    </div>

</div>
<form asp-action="Savestory" method="post">

    <div class="container mt-3">
        <div class="row">
            <h2>Share your story</h2>
        </div>
        <div class="row mt-3">
            <div class="col-md-4 storydropdown">
                Select Mission
                <select class="form-select" aria-label="Default select example" id="storydropdown">

                    <option selected>Open this select menu</option>
                    @foreach (var item in Model.getmission)
                    {
                        <option value="@item.Mission.MissionId">@item.Mission.Title</option>
                    }
                </select>
            </div>
            <div class="col-md-4 storydropdown">
                My Story Title
                <input class="form-control" type="text" placeholder="Enter story title"
                       aria-label="default input example" id="title">
            </div>
            <div class="col-md-4 storydropdown">
                Date
                <input id="PublishedAt" class="form-control" type="date" placeholder="Select date" aria-label="default input example">
            </div>

        </div>
        <div class="row mt-3">
            <div class="storydropdown" id="description">
                My Story
                <input class="form-control" type="text" placeholder="Enter story description"
                       aria-label="default input example" id="myTextarea" style="height: 150px;">
            </div>
        </div>

        <div class="storydropdown mt-3">
            Enter Video URL
            <input class="form-control" type="text" placeholder="Enter your url" aria-label="default input example">
        </div>

        <div class="row">
            <div class="storydropdown">
            </div>
        </div>
        <div class="row">
            <div class="input-div">
                <p>Drag & drop photos here or <strong>Browse</strong></p>
                <input type="file" class="file" multiple="multiple" accept="image/jpeg, image/png, image/jpg">
            </div>
            <div id="share-story-content-upload-photos" class="pt-3">
                <label for="">
                    Upload your photos
                </label><br />
                <div id="dropSection" class="w-100 d-flex flex-column align-items-center justify-content-center">
                    <span class="fs-1 fw-lighter">+</span>
                    <span class="fs-5 fw-lighter">Drag and drop pictures here</span>
                </div>
                <div id="uploadedFiles" class="p-2 d-flex flex-wrap">
                </div>
                <input type="button" id="btnUpload" value="Upload" />
            </div>

            <output></output>
        </div>
        <div class="row mt-3">
            <div style="display: flex; justify-content: space-between;" class="storydropdown">
                <div style=" display: inline-block; ">
                    <button class="canclebutton" id="cancelbtnsharestory">cancle</button>
                </div>
                <div style=" display: inline-block;">
                    <button class="savebutton" id="savebtnsharestory" type="submit">save</button>
                    <button class="savebutton" id="submitbtnsharestory">submit</button>
                </div>
            </div>
        </div>
    </div>
</form>
@section Javascript{

<!-- TinyMCE -->
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
<script>
    tinymce.init({
        selector: '#myTextarea',
        plugins: 'advlist autolink lists link image charmap print preview anchor',
        toolbar: 'bold italic underline superscript subscript',
        menubar: false,
        statusbar: false
    });
</script>
<script>
        const inputDiv = document.querySelector(".input-div")
        const input = document.querySelector("input")
        const output = document.querySelector("output")
        let imagesArray = []
        input.addEventListener("change", () => {

        })
        input.addEventListener("change", () => {
            const files = input.files
        })
        input.addEventListener("change", () => {
            const files = input.files
            for (let i = 0; i < files.length; i++) {
                imagesArray.push(files[i])
            }
        })
        input.addEventListener("change", () => {
            const files = input.files
            for (let i = 0; i < files.length; i++) {
                imagesArray.push(files[i])
            }
            displayImages()
        })
        inputDiv.addEventListener("drop", (e) => {

        })
        inputDiv.addEventListener("drop", (e) => {
            e.preventDefault()
            const files = e.dataTransfer.files
        })
        inputDiv.addEventListener("drop", () => {
            e.preventDefault()
            const files = e.dataTransfer.files
            for (let i = 0; i < files.length; i++) {
                if (!files[i].type.match("image")) continue
            }
        })
        inputDiv.addEventListener("drop", () => {
            e.preventDefault()
            const files = e.dataTransfer.files
            for (let i = 0; i < files.length; i++) {
                if (!files[i].type.match("image")) continue

                if (imagesArray.every(image => image.name !== files[i].name))
                    imagesArray.push(files[i])
            }
        })
        inputDiv.addEventListener("drop", () => {
            e.preventDefault()
            const files = e.dataTransfer.files
            for (let i = 0; i < files.length; i++) {
                if (!files[i].type.match("image")) continue;

                if (imagesArray.every(image => image.name !== files[i].name))
                    imagesArray.push(files[i])
            }
            displayImages()
        })
        function displayImages() {
            let images = ""
        }
        function displayImages() {
            let images = ""
            imagesArray.forEach((image, index) => {
                images += `<div class="image">
    <img src="${URL.createObjectURL(image)}" alt="image">
    <span onclick="deleteImage(${index})">&times;</span>
    </div>`
            })
        }
        function displayImages() {
            let images = ""
            imagesArray.forEach((image, index) => {
                images += `<div class="image">
    <img src="${URL.createObjectURL(image)}" alt="image">
    <span onclick="deleteImage(${index})">&times;</span>
    </div>`
            })
            output.innerHTML = images
        }
        function deleteImage(index) {
            imagesArray.splice(index, 1)
            displayImages()
        }




        // // upload images

</script>
<script src="~/js/share_story.js" asp-append-version="true"></script>
<script src="~/js/filedrop.js" asp-append-version="true"></script>

    }